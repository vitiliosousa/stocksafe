TELA 29: RECEBIMENTO FISCAL/FINANCEIRO
Rota: /recebimento/fiscal/[id]
Acesso:

Lista de recebimentos pendentes de conferÃªncia fiscal
NotificaÃ§Ã£o para Financeiro apÃ³s conferÃªncia fÃ­sica concluÃ­da

Estrutura:
CabeÃ§alho:

Breadcrumb: Home / Recebimento / ConferÃªncia Fiscal / Recebimento #[nÃºmero]
TÃ­tulo: "ConferÃªncia Fiscal - Recebimento #[nÃºmero]"
Badge: Status (Aguardando ConferÃªncia | Em ConferÃªncia | Aprovado | Divergente)

Card: Dados do Recebimento
Layout em 2 colunas:
Coluna 1:

NÂº Recebimento: [nÃºmero]
PO Origem: #[nÃºmero] (link)
Fornecedor: [nome]
Data Recebimento: [data]
Status ConferÃªncia FÃ­sica: [badge] (ConcluÃ­da)

Coluna 2:

Valor do PO: R$ [valor]
Qtd de Itens: [X]
Recebidos: [Y] itens
DivergÃªncias: [Z] itens
Status Fiscal: [badge]

Card: Dados da Nota Fiscal
FormulÃ¡rio:

**NÃºmero da Nota Fiscal *** (input text)

Placeholder: "Ex: 12345"
ValidaÃ§Ã£o: obrigatÃ³rio, numÃ©rico
Verifica duplicidade (alerta se jÃ¡ existe)


SÃ©rie da NF (input text)

Placeholder: "Ex: 1"


Chave de Acesso NF-e (input text)

Placeholder: "44 dÃ­gitos"
MÃ¡scara: XXXX XXXX XXXX XXXX XXXX XXXX XXXX XXXX XXXX XXXX XXXX
ValidaÃ§Ã£o: 44 dÃ­gitos, validaÃ§Ã£o de DV


**Tipo de NF *** (dropdown)

NF-e (Nota Fiscal EletrÃ´nica)
NFS-e (Nota Fiscal de ServiÃ§o)
Nota Fiscal Manual
Outro


**Data de EmissÃ£o *** (date picker)

ValidaÃ§Ã£o: nÃ£o pode ser futuro
Alerta se > 7 dias da data do recebimento


Data de Entrada (date picker)

Default: data do recebimento
EditÃ¡vel


**CFOP *** (input text)

Placeholder: "Ex: 5102"
ValidaÃ§Ã£o: formato XXXX
Autocomplete com CFOPs comuns


Natureza da OperaÃ§Ã£o (input text)

Placeholder: "Ex: Venda de mercadoria"
Autocomplete


**Upload da NF *** (upload)

PDF ou XML
Tamanho mÃ¡ximo: 10MB
Se XML: faz parse automÃ¡tico e preenche campos
Preview do documento


Upload do DANFE (upload opcional)

PDF
Preview



Card: ComparaÃ§Ã£o PO vs NF
Tabela Comparativa de Valores:
Colunas: Item | Valor PO | Valor NF | DivergÃªncia
Linhas:

Subtotal Produtos

PO: R$ [valor calculado do PO]
NF: [input] R$ (ou auto-preenchido se XML)
DivergÃªncia: [diferenÃ§a] (visual: verde se =, amarelo/vermelho se â‰ )


Desconto

PO: R$ [desconto do PO]
NF: [input] R$
DivergÃªncia: [diferenÃ§a]


Frete

PO: R$ [frete do PO]
NF: [input] R$
DivergÃªncia: [diferenÃ§a]


Seguro

PO: R$ [valor]
NF: [input] R$
DivergÃªncia: [diferenÃ§a]


Outras Despesas

PO: R$ [valor]
NF: [input] R$
DivergÃªncia: [diferenÃ§a]


IVA/ICMS

PO: R$ [valor calculado]
NF: [input] R$
DivergÃªncia: [diferenÃ§a]


IPI

PO: R$ [valor]
NF: [input] R$
DivergÃªncia: [diferenÃ§a]


PIS

PO: R$ [valor]
NF: [input] R$
DivergÃªncia: [diferenÃ§a]


COFINS

PO: R$ [valor]
NF: [input] R$
DivergÃªncia: [diferenÃ§a]


Outros Impostos

PO: R$ [valor]
NF: [input] R$
DivergÃªncia: [diferenÃ§a]


TOTAL GERAL

PO: R$ [total do PO] (destaque)
NF: R$ [total da NF] (destaque)
DivergÃªncia: R$ [diferenÃ§a] (destaque grande)
% de divergÃªncia



Indicador Visual Grande:

Se divergÃªncia = 0: âœ… "Valores Conferem"
Se divergÃªncia > 0 e < 5%: âš ï¸ "DivergÃªncia Pequena - AnÃ¡lise NecessÃ¡ria"
Se divergÃªncia â‰¥ 5%: ğŸ”´ "DivergÃªncia Significativa - AÃ§Ã£o ObrigatÃ³ria"

Card: Itens da NF vs Recebimento
Tabela:

Colunas:

Produto (SKU + DescriÃ§Ã£o)
Qtd PO
Qtd NF (input editÃ¡vel)
Qtd Recebida (read-only, da conferÃªncia fÃ­sica)
PreÃ§o Unit. PO
PreÃ§o Unit. NF (input)
Subtotal NF
Conformidade (âœ…/âš ï¸/âŒ)


Para cada linha:

ValidaÃ§Ã£o: Qtd NF deve = Qtd Recebida (alerta se diferente)
ValidaÃ§Ã£o: PreÃ§o NF deve = PreÃ§o PO (alerta se diferente)
Se divergÃªncia: campo "Justificativa" (textarea)



Card: Impostos Detalhados
Para cada imposto (expansÃ­vel):
IVA/ICMS:

Base de CÃ¡lculo: [input] R$
AlÃ­quota: [input] %
Valor: [calculado] R$
CST/CSOSN: [input]

IPI:

Base de CÃ¡lculo: [input] R$
AlÃ­quota: [input] %
Valor: [calculado] R$

PIS:

Base de CÃ¡lculo: [input] R$
AlÃ­quota: [input] %
Valor: [calculado] R$
CST: [input]

COFINS:

Base de CÃ¡lculo: [input] R$
AlÃ­quota: [input] %
Valor: [calculado] R$
CST: [input]

BotÃ£o: "Calcular Impostos Automaticamente" (se XML disponÃ­vel)
Card: DivergÃªncias e Justificativas
Se houver divergÃªncias:
Lista de DivergÃªncias Detectadas:

Tipo | DescriÃ§Ã£o | Valor PO | Valor NF | DiferenÃ§a
Cada divergÃªncia tem:

Campo: "Justificativa" * (textarea obrigatÃ³rio)
Dropdown: "ResponsÃ¡vel pela DivergÃªncia" (Fornecedor | Transportadora | Erro Interno | Outro)
Checkbox: "Notificar fornecedor sobre divergÃªncia"



Card: Tratamento de DivergÃªncias
Radio buttons:

â—‹ Aprovar NF com DivergÃªncias (requer aprovaÃ§Ã£o superior)

Campo: "Aprovador" * (dropdown de gerentes/diretores)
Campo: "Justificativa da AprovaÃ§Ã£o" * (textarea)


â—‹ Solicitar Nota Fiscal Complementar ao Fornecedor

Campo: "Valor da NF Complementar" (calculado automaticamente)
Checkbox: "Enviar solicitaÃ§Ã£o por email"


â—‹ Solicitar Nota Fiscal de Ajuste/CorreÃ§Ã£o

Campo: "Itens a ajustar" (checklist)
Campo: "ObservaÃ§Ãµes para o fornecedor"


â—‹ Rejeitar NF e Bloquear Pagamento

Campo: "Motivo da RejeiÃ§Ã£o" * (textarea)
Checkbox: "Gerar processo de devoluÃ§Ã£o"



Card: GRN (Goods Receipt Note)
InformaÃ§Ãµes do GRN:

CÃ³digo GRN: GRN-[auto-gerado]
Data de GeraÃ§Ã£o: [auto]
ResponsÃ¡vel: [usuÃ¡rio logado]
Status: (Pendente | Aprovado | Rejeitado)

ObservaÃ§Ãµes do GRN:

Textarea para notas gerais
Checkbox: "Vincular ao processo de Contas a Pagar"
Se marcado:

Campo: "CondiÃ§Ãµes de Pagamento" (do PO, editÃ¡vel)
Campo: "Data de Vencimento" (calculada)
Campo: "Centro de Custo" (dropdown)



Card: Documentos Fiscais Adicionais
Upload mÃºltiplo:

Comprovante de RetenÃ§Ã£o de Impostos
Guia de Recolhimento
Certificado de Origem
LicenÃ§a de ImportaÃ§Ã£o (se aplicÃ¡vel)
Outros documentos

ValidaÃ§Ãµes Globais:

NÃºmero NF obrigatÃ³rio e Ãºnico
Data de emissÃ£o obrigatÃ³ria
Upload da NF obrigatÃ³rio
Se divergÃªncias > 5%: justificativas obrigatÃ³rias
Se divergÃªncias e aprovar: aprovador obrigatÃ³rio

BotÃµes:
Salvar Rascunho:

Salva sem finalizar
Status = em_conferencia
Toast: "Rascunho salvo"

Aprovar e Gerar GRN:

ValidaÃ§Ã£o completa
Se divergÃªncias significativas: exige aprovador
Modal de confirmaÃ§Ã£o:

"Aprovar ConferÃªncia Fiscal?"
Resumo: Total NF | Total PO | DivergÃªncia | Status
Se divergÃªncias: lista resumida
Checkbox: "Confirmo que revisei todos os valores" *


Ao confirmar:

POST /api/recebimentos/fiscal/aprovar
Gera GRN definitivo com cÃ³digo Ãºnico
Atualiza status do recebimento = fiscal_aprovado
Se sem divergÃªncias:

Libera para pagamento imediatamente
Cria tÃ­tulo no Contas a Pagar (se integrado)


Se com divergÃªncias e aprovado:

Registra divergÃªncias no log
Notifica aprovador
Libera para pagamento (se aprovador concordou)
Se solicitou NF complementar: cria pendÃªncia


Vincula NF ao PO e Recebimento
Atualiza histÃ³rico financeiro do fornecedor
Gera PDF do GRN com:

Todos os dados
Comparativos
Justificativas (se houver)
Assinaturas digitais


Toast: "GRN gerado! CÃ³digo: GRN-[nÃºmero]"
Redireciona:

"Ver GRN" (PDF)
"Ir para Contas a Pagar" (se integrado)
"Lista de Recebimentos"





Rejeitar NF:

Modal crÃ­tico:

"âš ï¸ Rejeitar Nota Fiscal?"
Alerta: "O pagamento serÃ¡ bloqueado e o fornecedor notificado"
Campo: "Motivo Detalhado da RejeiÃ§Ã£o" * (textarea, min 100 caracteres)
Checkbox: "Notificar fornecedor imediatamente" *
Checkbox: "Bloquear futuras NFs deste fornecedor atÃ© regularizaÃ§Ã£o"


Ao confirmar:

Status = fiscal_rejeitado
Bloqueia pagamento
Notifica fornecedor com motivos
Registra no scorecard (-10 pontos)
Cria pendÃªncia no sistema
Toast: "NF rejeitada. Fornecedor notificado."




TELA 30: CONSULTA DE SALDO DE ESTOQUE â­â­
Rota: /estoque/consulta
Acesso: Sidebar â†’ Estoque â†’ Consultar Estoque
Estrutura:
CabeÃ§alho:

TÃ­tulo: "Consulta de Estoque"
SubtÃ­tulo: "VisualizaÃ§Ã£o em tempo real do estoque por lote e validade"

Filtros AvanÃ§ados (colapsÃ¡vel):
Linha 1:

Busca RÃ¡pida (input grande)

Placeholder: "Buscar por SKU, descriÃ§Ã£o, lote..."
Busca em tempo real (debounce 300ms)
Ãcone de lupa


Categoria (dropdown multi-select)

Todas | Fresco | Seco | Congelado | Bebidas | Limpeza | etc.


Local (tree select multi)

Hierarquia: ArmazÃ©m > Zona > Corredor > Prateleira
Permite selecionar mÃºltiplos nÃ­veis



Linha 2:

Status do Lote (dropdown multi-select)

Todos | DisponÃ­vel | Bloqueado | Quarentena | Restrito | Vencido


Faixa de Validade (mÃºltiplas opÃ§Ãµes - radio buttons)

â—‹ Todos
â—‹ Vencidos
â—‹ Vence em â‰¤ 7 dias
â—‹ Vence em â‰¤ 15 dias
â—‹ Vence em â‰¤ 30 dias
â—‹ Vence em â‰¤ 60 dias
â—‹ Vence em > 60 dias
â—‹ Customizado: De [date] atÃ© [date]


Quantidade (range)

MÃ­nimo: [input]
MÃ¡ximo: [input]



Linha 3:

Fornecedor (dropdown searchable)

Todos os fornecedores


Tipo de Controle (checkbox)

â˜ Apenas com controle de lote
â˜ Apenas perecÃ­veis


Ordenar por: (dropdown)

Validade (ascendente) - FEFO
Validade (descendente)
Quantidade (maior primeiro)
Quantidade (menor primeiro)
Produto (A-Z)
Dias para vencer (menor primeiro)
Data de entrada (mais antigo)
Local



BotÃµes:

"Limpar Filtros"
"Salvar Filtro Atual" (para uso recorrente)
"Exportar Resultado" (XLSX/CSV/PDF)


Cards de KPIs (acima da tabela):
Card 1: Valor Total em Estoque

R$ [valor total calculado]
% vs mÃªs anterior

Card 2: Total de Itens

 itens Ãºnicos
[Y] lotes distintos

Card 3: Alertas CrÃ­ticos

ğŸ”´ [X] lotes vencidos
ğŸŸ  [Y] lotes vencem em 7 dias
Link: "Ver detalhes"

Card 4: OcupaÃ§Ã£o

[X]% de capacidade utilizada
Barra de progresso visual
Link: "Ver por local"


VisualizaÃ§Ã£o (tabs):
TAB 1: VISÃƒO POR LOTE (padrÃ£o)
Tabela Principal:
Colunas:

Produto (fixo Ã  esquerda, 250px)

SKU (fonte mono, pequeno)
DescriÃ§Ã£o (truncada com tooltip)
Imagem thumbnail (opcional, hover)
Categoria (badge pequeno)
ClicÃ¡vel: abre detalhes do produto


Lote (150px)

CÃ³digo do lote (fonte mono)
Badge: tipo (Proposto | Real | Ajustado)
ClicÃ¡vel: mostra histÃ³rico do lote


Validade (120px)

Data (DD/MM/AAAA)
Dias para Vencer (destaque)

Visual colorido:

ğŸ”´ Vencido ou < 7 dias
ğŸŸ  7-15 dias
ğŸŸ¡ 15-30 dias
ğŸŸ¢ > 30 dias




Ãcone de alerta se crÃ­tico


% Vida Ãštil (100px)

Barra de progresso horizontal
NÃºmero: [X]%
Verde > 50% | Amarelo 20-50% | Vermelho < 20%


Quantidade (100px)

NÃºmero (grande)
Unidade (pequeno)
Alerta se abaixo do mÃ­nimo


Local (200px)

ArmazÃ©m > Zona > Corredor > Prateleira
Formato abreviado com tooltip completo
Ãcone indicando tipo (temperatura)
ClicÃ¡vel: filtra por local


Valor UnitÃ¡rio (100px)

R$ [preÃ§o mÃ©dio]
Pequeno, formatado


Valor Total (120px)

R$ [qtd Ã— preÃ§o]
Destaque, negrito


Status (100px)

Badge grande:

ğŸŸ¢ DisponÃ­vel
ğŸ”´ Bloqueado
ğŸŸ  Quarentena
ğŸŸ¡ Restrito
âš« Vencido


Tooltip com motivo (se bloqueado)


Data Entrada (100px)

DD/MM/AAAA
Tempo no estoque (hover): "HÃ¡ X dias"


Fornecedor (150px)

Nome (truncado)
Score visual (mini badge)
Tooltip com nome completo


AÃ§Ãµes (100px, fixo Ã  direita)

BotÃ£o: "..." (dropdown)
Menu:

ğŸ“‹ Ver Detalhes
ğŸ·ï¸ Imprimir Etiqueta
ğŸ“¦ Transferir
ğŸ”’ Bloquear/Desbloquear
ğŸ“Š Ver MovimentaÃ§Ãµes
âš ï¸ Registrar NC
ğŸ—‘ï¸ Descartar





Funcionalidades da Tabela:

SeleÃ§Ã£o mÃºltipla: Checkbox na primeira coluna

Quando selecionados: barra de aÃ§Ãµes no topo

"Imprimir Etiquetas" (mÃºltiplas)
"Transferir em Lote"
"Exportar Selecionados"
"Bloquear Selecionados"




OrdenaÃ§Ã£o: Clique em cabeÃ§alhos
PaginaÃ§Ã£o: 25/50/100/Todos itens por pÃ¡gina
Totalizadores no rodapÃ©:

Total de Linhas: [X]
Total Qtd: [soma]
Valor Total: R$ [soma]


Linha expansÃ­vel: Click em linha mostra detalhes:

HistÃ³rico de movimentaÃ§Ãµes deste lote
PO origem
Recebimento vinculado
NCs (se houver)
Mini-grÃ¡fico de consumo



Destaque Visual:

Linha completa vermelha: se vencido
Linha amarela: se vence em < 7 dias
Linha cinza: se bloqueado/quarentena
AnimaÃ§Ã£o sutil: piscar vermelho se vence hoje


TAB 2: VISÃƒO CONSOLIDADA POR PRODUTO
Tabela Agrupada:
Colunas:

Produto (SKU + DescriÃ§Ã£o)
Qtd Total (soma de todos os lotes)
Qtd DisponÃ­vel (soma dos lotes disponÃ­veis)
Qtd Bloqueada (soma dos bloqueados)
Qtd de Lotes (nÃºmero)
Lote Mais Antigo (validade do prÃ³ximo a vencer)
Dias p/ PrÃ³ximo Vencimento (menor)
Valor Total (R$)
AÃ§Ãµes

Click em linha: Expande mostrando todos os lotes daquele produto (mesmo formato da Tab 1)

TAB 3: VISÃƒO POR LOCAL
Estrutura HierÃ¡rquica (Tree Table):

ğŸ“¦ ArmazÃ©m Central (expansÃ­vel)

Qtd Total: [X]
Valor: R$ [Y]
OcupaÃ§Ã£o: [Z]%
â„ï¸ Zona Fria (expansÃ­vel)

Qtd: [X]
Valor: R$ [Y]
Corredor A (expansÃ­vel)

Prateleira A1

Tabela de lotes neste local (formato resumido)


Prateleira A2


Corredor B


ğŸŒ¡ï¸ Zona Seca
ğŸ§Š Zona Congelados



BotÃ£o por nÃ­vel: "Ver Mapa do Local" (abre visualizaÃ§Ã£o grÃ¡fica se disponÃ­vel)

TAB 4: ALERTAS E VALIDADES
Agrupado por faixa de validade:
Card: ğŸ”´ Vencidos ([X] lotes)

Tabela dos vencidos
AÃ§Ã£o em lote: "Iniciar Descarte de Todos"

Card: ğŸŸ  Vence em â‰¤ 7 dias ([Y] lotes)

Tabela
AÃ§Ã£o: "Criar Campanha de Escoamento"

Card: ğŸŸ¡ Vence em 8-15 dias ([Z] lotes)

Tabela
AÃ§Ã£o: "Priorizar na ExpediÃ§Ã£o"

(continua com outras faixas)

Modal: Detalhes do Lote (ao clicar em lote)
Estrutura em abas:
Aba 1: InformaÃ§Ãµes Gerais

Produto completo
Lote
Validade + dias restantes + % vida Ãºtil
Quantidade atual
Local detalhado
Status
Valor unitÃ¡rio e total
Data de entrada
Fornecedor com score

Aba 2: Rastreabilidade

PO Origem (link)
RFQ Origem (se houver)
RI Origem (se houver)
Recebimento: data, responsÃ¡vel
Lote Proposto vs Real (comparaÃ§Ã£o)
Validade Proposta vs Real (comparaÃ§Ã£o)
Datasheet/CoA (download)
NCs associadas (se houver)
InspeÃ§Ãµes QA (se houver)

Aba 3: MovimentaÃ§Ãµes

HistÃ³rico completo:

Data/Hora | Tipo | Qtd | De > Para | UsuÃ¡rio | Motivo


Saldo inicial vs atual
GrÃ¡fico de linha: evoluÃ§Ã£o da quantidade

Aba 4: RestriÃ§Ãµes (se houver)

Tipo de restriÃ§Ã£o
Motivo
Prazo da restriÃ§Ã£o
ResponsÃ¡vel
ObservaÃ§Ãµes

BotÃµes no modal:

Imprimir Etiqueta
Transferir
Bloquear/Desbloquear
Ajustar Quantidade (inventÃ¡rio pontual)
Fechar


AÃ§Ãµes RÃ¡pidas (botÃµes flutuantes/fixos):
BotÃ£o 1: "+ Ajuste Manual"

Abre modal para registrar entrada/saÃ­da/ajuste manual

BotÃ£o 2: "ğŸ“Š RelatÃ³rios"

Dropdown:

Curva ABC
Giro de Estoque
Validade em Risco
OcupaÃ§Ã£o por Local
Valor por Categoria



BotÃ£o 3: "ğŸ”” Configurar Alertas"

Abre tela de configuraÃ§Ã£o de alertas personalizados


Estado Vazio:

IlustraÃ§Ã£o de caixa vazia
"Nenhum item em estoque no momento"
Ou "Nenhum resultado encontrado para os filtros aplicados"
BotÃ£o: "Limpar Filtros" | "Cadastrar Primeiro Produto"